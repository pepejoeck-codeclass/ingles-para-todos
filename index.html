<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Plataforma InglÃ©s Completa</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;font-family:Arial,sans-serif;background:#eef3f9;}
header{background:linear-gradient(90deg,#4cafef,#2f8ad8);color:white;padding:20px;text-align:center;}
nav{background:#2f8ad8;padding:10px;text-align:center;}
nav button{margin:5px;padding:8px 12px;border-radius:6px;border:none;color:white;background:#4cafef;cursor:pointer;}
nav button:hover{background:#1d6fc2;}
section{max-width:1100px;margin:auto;padding:15px;}
.card{background:white;border-radius:14px;padding:20px;margin-bottom:20px;}
.hidden{display:none;}
input,select,textarea{padding:8px;border-radius:6px;border:1px solid #ccc;width:100%;}
button.game-btn{margin:4px;padding:6px 12px;border-radius:6px;border:none;background:#4cafef;color:white;cursor:pointer;}
button.game-btn:hover{background:#2f8ad8;}
.progress{background:#ddd;border-radius:10px;overflow:hidden;}
.progress div{height:14px;background:#4cafef;}
footer{background:#2f8ad8;color:white;text-align:center;padding:12px;}
.kids{background:#fffbe6;}
.kids .card{background:#fff3cc;}
</style>
</head>

<body>

<header>
<h1>ğŸ“˜ Plataforma InglÃ©s Completa</h1>
<p>Listening â€¢ Reading â€¢ Speaking â€¢ Writing</p>
</header>

<nav id="menu" class="hidden">
<button onclick="showLesson('alphabet')">Alphabet</button>
<button onclick="showLesson('family')">Family Members</button>
<button onclick="showLesson('questions')">Question Words</button>
<button onclick="showLesson('toBe')">Verb To Be</button>
<button onclick="showLesson('simplePresent')">Simple Present</button>
<button onclick="showLesson('simplePast')">Simple Past</button>
<button onclick="showLesson('exam')">Examen</button>
</nav>

<section>
<!-- LOGIN -->
<div class="card" id="login">
<h2>ğŸ‘¤ Usuario</h2>
<input id="username" placeholder="Tu nombre">
<select id="mode">
<option value="kids">Modo NiÃ±os</option>
<option value="adult">Modo Adultos</option>
</select>
<button onclick="start()">Entrar</button>
</div>

<!-- PROGRESO -->
<div class="card hidden" id="progressCard">
<h2>ğŸ“Š Progreso</h2>
<div class="progress"><div id="bar"></div></div>
<p id="level"></p>
</div>

<!-- LECCIONES -->
<div class="card hidden lesson" id="alphabet">
<h2>ğŸ”¤ Alphabet Aâ€“Z</h2>
<p>Escucha y repite las letras:</p>
<div id="alphabetLetters"></div>
<p>Juego: Selecciona la letra correcta que escuchaste</p>
<button class="game-btn" onclick="checkAnswer('A','alphabet')">A</button>
<button class="game-btn" onclick="checkAnswer('B','alphabet')">B</button>
<p id="alphabetResult"></p>
</div>

<div class="card hidden lesson" id="family">
<h2>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Family Members</h2>
<p>Father <button onclick="speak('Father')">ğŸ”Š</button> = Padre</p>
<p>Mother <button onclick="speak('Mother')">ğŸ”Š</button> = Madre</p>
<p>Brother <button onclick="speak('Brother')">ğŸ”Š</button> = Hermano</p>
<p>Sister <button onclick="speak('Sister')">ğŸ”Š</button> = Hermana</p>
<p><b>Lectura:</b> My father and mother are happy.</p>
<p>Juego: Â¿QuiÃ©n es "Father"?</p>
<button class="game-btn" onclick="checkAnswer(true,'family')">Padre</button>
<button class="game-btn" onclick="checkAnswer(false,'family')">Hermano</button>
<p id="familyResult"></p>
<p><b>Writing:</b> Escribe "Father" en inglÃ©s:</p>
<input id="familyWrite" placeholder="Tu respuesta">
<button onclick="checkWriting('familyWrite','Father','familyWriteResult')">Comprobar</button>
<p id="familyWriteResult"></p>
</div>

<div class="card hidden lesson" id="questions">
<h2>â“ Question Words</h2>
<p>What / Where / When / Why / Who</p>
<p>Lectura: Where do you live?</p>
<p>Juego: Elige la palabra correcta</p>
<button class="game-btn" onclick="checkAnswer(true,'questions')">Where</button>
<button class="game-btn" onclick="checkAnswer(false,'questions')">Why</button>
<p id="questionsResult"></p>
<p><b>Writing:</b> Escribe la pregunta "Where do you live?"</p>
<input id="questionsWrite" placeholder="Tu respuesta">
<button onclick="checkWriting('questionsWrite','Where do you live?','questionsWriteResult')">Comprobar</button>
<p id="questionsWriteResult"></p>
</div>

<div class="card hidden lesson" id="toBe">
<h2>ğŸ§  Verb To Be</h2>
<p>Afirmativo: I am happy</p>
<p>Negativo: I am not sad</p>
<p>Pregunta: Am I happy?</p>
<p>Contracciones: I'm / You're / He's</p>
<p>Juego: Completa I ___ happy</p>
<button class="game-btn" onclick="checkAnswer(true,'toBe')">am</button>
<button class="game-btn" onclick="checkAnswer(false,'toBe')">is</button>
<p id="toBeResult"></p>
<p><b>Writing:</b> Escribe "I am happy"</p>
<input id="toBeWrite" placeholder="Tu respuesta">
<button onclick="checkWriting('toBeWrite','I am happy','toBeWriteResult')">Comprobar</button>
<p id="toBeWriteResult"></p>
</div>

<div class="card hidden lesson" id="simplePresent">
<h2>â° Simple Present</h2>
<p>I play soccer</p>
<p>I do not play tennis</p>
<p>Do you play soccer?</p>
<p>Lectura: I play soccer every day.</p>
<p>Juego: Â¿CuÃ¡l es la forma correcta del verbo "do"?</p>
<button class="game-btn" onclick="checkAnswer(true,'simplePresent')">Do</button>
<button class="game-btn" onclick="checkAnswer(false,'simplePresent')">Did</button>
<p id="simplePresentResult"></p>
<p><b>Writing:</b> Escribe "I play soccer"</p>
<input id="simplePresentWrite" placeholder="Tu respuesta">
<button onclick="checkWriting('simplePresentWrite','I play soccer','simplePresentWriteResult')">Comprobar</button>
<p id="simplePresentWriteResult"></p>
</div>

<div class="card hidden lesson" id="simplePast">
<h2>âŒ› Simple Past</h2>
<p>I played soccer</p>
<p>I did not play soccer</p>
<p>Did you play soccer?</p>
<p>Lectura: Yesterday I played soccer.</p>
<p>Juego: Â¿CuÃ¡l es la forma correcta del verbo "did"?</p>
<button class="game-btn" onclick="checkAnswer(true,'simplePast')">Did</button>
<button class="game-btn" onclick="checkAnswer(false,'simplePast')">Do</button>
<p id="simplePastResult"></p>
<p><b>Writing:</b> Escribe "I played soccer"</p>
<input id="simplePastWrite" placeholder="Tu respuesta">
<button onclick="checkWriting('simplePastWrite','I played soccer','simplePastWriteResult')">Comprobar</button>
<p id="simplePastWriteResult"></p>
</div>

<div class="card hidden lesson" id="exam">
<h2>ğŸ“ Examen Completo</h2>
<p>Responde correctamente todas las preguntas. Puedes intentar varias veces.</p>
<div id="examQuestions"></div>
<p id="examScore"></p>
</div>

</section>

<footer>
<p>Â© 2026 Plataforma InglÃ©s Completa</p>
</footer>

<script>
// VARIABLES
let score=0;
let currentUser="";
let attempts = [];

// INICIO
function start(){
    let user=document.getElementById("username").value;
    let mode=document.getElementById("mode").value;
    if(!user){alert("Escribe tu nombre");return;}
    currentUser=user;
    score=parseInt(localStorage.getItem(user+"-score"))||0;
    attempts = JSON.parse(localStorage.getItem(user+"-attempts")) || [];
    document.getElementById("login").classList.add("hidden");
    document.getElementById("menu").classList.remove("hidden");
    document.getElementById("progressCard").classList.remove("hidden");
    if(mode==="kids") document.body.classList.add("kids");
    buildAlphabet();
    updateProgress();
    showLesson('alphabet');
}

// ALPHABET
function buildAlphabet(){
    let letters="ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    let html="";
    for(let l of letters){
        html+=`${l} <button onclick="speak('${l}')">ğŸ”Š</button> `;
    }
    document.getElementById("alphabetLetters").innerHTML=html;
}

// SPEAK
function speak(word){
    let audio=new Audio("https://ssl.gstatic.com/dictionary/static/sounds/oxford/"+word.toLowerCase()+"--_us_1.mp3");
    audio.play();
}

// MENÃš LECCIONES
function showLesson(id){
    let lessons=document.getElementsByClassName("lesson");
    for(let l of lessons) l.classList.add("hidden");
    document.getElementById(id).classList.remove("hidden");
}

// JUEGOS
function checkAnswer(correct,id){
    let resultId=id+'Result';
    document.getElementById(resultId).innerText=correct?"âœ… Correcto":"âŒ Intenta otra vez";
    if(correct){
        score++;
        localStorage.setItem(currentUser+"-score",score);
        updateProgress();
    }
}

// WRITING
function checkWriting(inputId,answer,resultId){
    let userAnswer=document.getElementById(inputId).value.trim();
    if(userAnswer.toLowerCase()===answer.toLowerCase()){
        document.getElementById(resultId).innerText="âœ… Correcto";
        score++;
    }else{
        document.getElementById(resultId).innerText="âŒ Intenta otra vez";
    }
    localStorage.setItem(currentUser+"-score",score);
    updateProgress();
}

// PROGRESO
function updateProgress(){
    let percent=Math.min(score*5,100);
    document.getElementById("bar").style.width=percent+"%";
    document.getElementById("level").innerText=
        percent<40?"Nivel BÃ¡sico":percent<70?"Nivel Intermedio":"Excelente progreso ğŸ‰";
}

// EXAMEN COMPLETO
const examData=[
    {q:"I ___ happy.",a:"am"},
    {q:"Father in Spanish is?",a:"Padre"},
    {q:"Where do you live?",a:"Where do you live?"},
    {q:"Simple Past: I ___ soccer yesterday",a:"played"}
];

function loadExam(){
    let html="";
    examData.forEach((e,i)=>{
        html+=`<p>${e.q}</p><input id="exam${i}"><br>`;
    });
    html+=`<button onclick="checkExam()">Comprobar Examen</button>`;
    document.getElementById("examQuestions").innerHTML=html;
}
function checkExam(){
    let total=examData.length;
    let correct=0;
    examData.forEach((e,i)=>{
        let ans=document.getElementById("exam"+i).value.trim().toLowerCase();
        if(ans===e.a.toLowerCase()) correct++;
    });
    document.getElementById("examScore").innerText=`Tu puntuaciÃ³n: ${correct}/${total}`;
    attempts.push(correct+"/"+total+" intentos");
    localStorage.setItem(currentUser+"-attempts",JSON.stringify(attempts));
}

// CARGAR EXAMEN AL ENTRAR
showLesson('alphabet');
loadExam();

</script>

</body>
</html>
<!-- NUEVOS JUEGOS -->
<div class="card hidden lesson" id="matching">
  <h2>ğŸ¯ Juego Matching: Family Members</h2>
  <p>Arrastra la palabra a la imagen correcta:</p>
  <div style="display:flex;justify-content:space-around;">
    <div id="wordList">
      <div draggable="true" class="dragWord" data-word="Father">Father</div>
      <div draggable="true" class="dragWord" data-word="Mother">Mother</div>
      <div draggable="true" class="dragWord" data-word="Brother">Brother</div>
      <div draggable="true" class="dragWord" data-word="Sister">Sister</div>
    </div>
    <div id="dropZones">
      <div class="dropZone" data-word="Father">ğŸ‘¨</div>
      <div class="dropZone" data-word="Mother">ğŸ‘©</div>
      <div class="dropZone" data-word="Brother">ğŸ‘¦</div>
      <div class="dropZone" data-word="Sister">ğŸ‘§</div>
    </div>
  </div>
  <p id="matchingResult"></p>
</div>

<div class="card hidden lesson" id="dragDrop">
  <h2>ğŸ”¤ Juego Drag & Drop: Alphabet</h2>
  <p>Ordena las letras Aâ€“E correctamente:</p>
  <div id="lettersContainer">
    <div draggable="true" class="dragLetter" data-letter="A">A</div>
    <div draggable="true" class="dragLetter" data-letter="B">B</div>
    <div draggable="true" class="dragLetter" data-letter="C">C</div>
    <div draggable="true" class="dragLetter" data-letter="D">D</div>
    <div draggable="true" class="dragLetter" data-letter="E">E</div>
  </div>
  <div id="dropAlphabet"></div>
  <p id="dragDropResult"></p>
</div>

<div class="card hidden lesson" id="listeningGame">
  <h2>ğŸ§ Listening bÃ¡sico</h2>
  <p>Escucha la palabra y selecciona la correcta:</p>
  <button onclick="playWord('Father')">ğŸ”Š Escuchar</button>
  <button class="game-btn" onclick="checkAnswer(true,'listeningGame')">Father</button>
  <button class="game-btn" onclick="checkAnswer(false,'listeningGame')">Mother</button>
  <button class="game-btn" onclick="checkAnswer(false,'listeningGame')">Brother</button>
  <p id="listeningGameResult"></p>
</div>

<div class="card hidden" id="dashboard">
  <h2>ğŸ“Š Dashboard de progreso</h2>
  <div id="historyList"></div>
</div>

<script>
// --- MATCHING ---
const dragWords = document.querySelectorAll('.dragWord');
const dropZones = document.querySelectorAll('.dropZone');

dragWords.forEach(word => {
  word.addEventListener('dragstart', e => e.dataTransfer.setData('text', word.dataset.word));
});

dropZones.forEach(zone => {
  zone.addEventListener('dragover', e => e.preventDefault());
  zone.addEventListener('drop', e => {
    let word = e.dataTransfer.getData('text');
    if(word === zone.dataset.word){
      zone.style.background="lightgreen";
      document.getElementById('matchingResult').innerText="âœ… Correcto!";
      saveAttempt('matching', 'Correcto');
    } else {
      zone.style.background="salmon";
      document.getElementById('matchingResult').innerText="âŒ Intenta otra vez";
      saveAttempt('matching', 'Incorrecto');
    }
  });
});

// --- DRAG & DROP ALPHABET ---
const dragLetters = document.querySelectorAll('.dragLetter');
const dropAlphabet = document.getElementById('dropAlphabet');
dragLetters.forEach(letter=>{
  letter.addEventListener('dragstart', e=>e.dataTransfer.setData('text',letter.dataset.letter));
});
dropAlphabet.addEventListener('dragover', e=>e.preventDefault());
dropAlphabet.addEventListener('drop', e=>{
  let l = e.dataTransfer.getData('text');
  dropAlphabet.appendChild(document.querySelector(`[data-letter="${l}"]`));
  // Verificar orden
  const correctOrder=['A','B','C','D','E'];
  const lettersInDrop = Array.from(dropAlphabet.children).map(c=>c.dataset.letter);
  if(JSON.stringify(lettersInDrop) === JSON.stringify(correctOrder)){
    document.getElementById('dragDropResult').innerText="âœ… Correcto!";
    saveAttempt('dragDrop', 'Correcto');
  }
});

// --- LISTENING ---
function playWord(word){
  let audio=new Audio("https://ssl.gstatic.com/dictionary/static/sounds/oxford/"+word.toLowerCase()+"--_us_1.mp3");
  audio.play();
}

// --- DASHBOARD HISTORIAL ---
function saveAttempt(game,result){
  let userAttempts = JSON.parse(localStorage.getItem(currentUser+"-history"))||[];
  userAttempts.push({game,result,date:new Date().toLocaleString()});
  localStorage.setItem(currentUser+"-history",JSON.stringify(userAttempts));
  loadDashboard();
}

function loadDashboard(){
  let userAttempts = JSON.parse(localStorage.getItem(currentUser+"-history"))||[];
  let html="<ul>";
  userAttempts.forEach(a=>{
    html+=`<li>${a.date}: ${a.game} â†’ ${a.result}</li>`;
  });
  html+="</ul>";
  document.getElementById('historyList').innerHTML=html;
}
</script>
<!-- LECCIONES CON JUEGOS -->
<div class="card hidden lesson" id="alphabetLesson">
  <h2>ğŸ”¤ Alphabet Aâ€“Z</h2>
  <p>Lectura: Las letras Aâ€“Z</p>
  <!-- Matching -->
  <h3>ğŸ¯ Matching</h3>
  <div id="alphabetMatching"></div>
  <!-- Drag & Drop -->
  <h3>ğŸ”¤ Drag & Drop</h3>
  <div id="alphabetDragDrop"></div>
  <!-- Listening -->
  <h3>ğŸ§ Listening</h3>
  <button onclick="playWord('A')">ğŸ”Š Escuchar letra</button>
  <button class="game-btn" onclick="checkAnswer(true,'alphabetListening')">A</button>
  <button class="game-btn" onclick="checkAnswer(false,'alphabetListening')">B</button>
  <p id="alphabetListeningResult"></p>
</div>

<div class="card hidden lesson" id="familyLesson">
  <h2>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Family Members</h2>
  <p>Lectura: My family members</p>
  <h3>ğŸ¯ Matching</h3>
  <div id="familyMatching"></div>
  <h3>ğŸ”¤ Drag & Drop</h3>
  <div id="familyDragDrop"></div>
  <h3>ğŸ§ Listening</h3>
  <button onclick="playWord('Father')">ğŸ”Š Escuchar</button>
  <button class="game-btn" onclick="checkAnswer(true,'familyListening')">Father</button>
  <button class="game-btn" onclick="checkAnswer(false,'familyListening')">Mother</button>
  <p id="familyListeningResult"></p>
</div>

<!-- DASHBOARD GENERAL -->
<div class="card hidden lesson" id="dashboardLesson">
  <h2>ğŸ“Š Dashboard de Progreso</h2>
  <canvas id="progressChart" width="400" height="200"></canvas>
  <h3>Historial de Intentos</h3>
  <div id="historyList"></div>
</div>

<!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
// USUARIO
let currentUser="";
let scoreByTheme={};
let history=[];

// INICIO
function start(){
    currentUser=document.getElementById("username").value;
    if(!currentUser){alert("Escribe tu nombre");return;}
    document.getElementById("login").classList.add("hidden");
    document.getElementById("menu").classList.remove("hidden");
    document.getElementById("progressCard").classList.remove("hidden");

    // Cargar historial
    history=JSON.parse(localStorage.getItem(currentUser+"-history"))||[];
    loadDashboard();

    // Cargar juegos iniciales por tema
    buildAlphabetMatching();
    buildAlphabetDragDrop();
    buildFamilyMatching();
    buildFamilyDragDrop();
}

// MENÃš LECCIONES
function showLesson(id){
    let lessons=document.getElementsByClassName("lesson");
    for(let l of lessons) l.classList.add("hidden");
    document.getElementById(id).classList.remove("hidden");
}

// JUEGOS MATCHING Y DRAG & DROP GENERALES
function buildAlphabetMatching(){
    const container=document.getElementById("alphabetMatching");
    container.innerHTML=`
      <div draggable="true" class="dragWord" data-word="A">A</div>
      <div draggable="true" class="dragWord" data-word="B">B</div>
      <div class="dropZone" data-word="A">ğŸ”²</div>
      <div class="dropZone" data-word="B">ğŸ”²</div>
    `;
    setupDragDrop(container,"alphabetMatching");
}
function buildAlphabetDragDrop(){
    const container=document.getElementById("alphabetDragDrop");
    container.innerHTML=`
      <div draggable="true" class="dragLetter" data-letter="A">A</div>
      <div draggable="true" class="dragLetter" data-letter="B">B</div>
      <div id="dropAlphabet"></div>
    `;
    setupDragDrop(container,"alphabetDragDrop");
}
function buildFamilyMatching(){
    const container=document.getElementById("familyMatching");
    container.innerHTML=`
      <div draggable="true" class="dragWord" data-word="Father">Father</div>
      <div draggable="true" class="dragWord" data-word="Mother">Mother</div>
      <div class="dropZone" data-word="Father">ğŸ‘¨</div>
      <div class="dropZone" data-word="Mother">ğŸ‘©</div>
    `;
    setupDragDrop(container,"familyMatching");
}
function buildFamilyDragDrop(){
    const container=document.getElementById("familyDragDrop");
    container.innerHTML=`
      <div draggable="true" class="dragLetter" data-letter="Father">Father</div>
      <div draggable="true" class="dragLetter" data-letter="Mother">Mother</div>
      <div id="dropFamily"></div>
    `;
    setupDragDrop(container,"familyDragDrop");
}

// FUNCION GENERAL DRAG & DROP
function setupDragDrop(containerId,theme){
    const container=document.getElementById(containerId);
    const draggables=container.querySelectorAll("[draggable]");
    const drops=container.querySelectorAll(".dropZone, #dropAlphabet, #dropFamily");
    draggables.forEach(d=>{
      d.addEventListener("dragstart",e=>e.dataTransfer.setData("text",d.dataset.word||d.dataset.letter));
    });
    drops.forEach(drop=>{
      drop.addEventListener("dragover",e=>e.preventDefault());
      drop.addEventListener("drop",e=>{
        let data=e.dataTransfer.getData("text");
        drop.appendChild(document.querySelector(`[data-word='${data}'],[data-letter='${data}']`));
        saveAttempt(theme,"Intento");
        loadDashboard();
      });
    });
}

// SPEAK
function playWord(word){
    let audio=new Audio("https://ssl.gstatic.com/dictionary/static/sounds/oxford/"+word.toLowerCase()+"--_us_1.mp3");
    audio.play();
}

// SAVE ATTEMPT
function saveAttempt(theme,result){
    history.push({theme,result,date:new Date().toLocaleString()});
    localStorage.setItem(currentUser+"-history",JSON.stringify(history));
}

// DASHBOARD
function loadDashboard(){
    const ctx=document.getElementById("progressChart").getContext("2d");
    let themeScores={};
    history.forEach(h=>{
        themeScores[h.theme]=(themeScores[h.theme]||0)+1;
    });
    const labels=Object.keys(themeScores);
    const data=Object.values(themeScores);
    if(window.myChart) window.myChart.destroy();
    window.myChart=new Chart(ctx,{
        type:'bar',
        data:{
            labels:labels,
            datasets:[{
                label:'Intentos por tema',
                data:data,
                backgroundColor:'rgba(54, 162, 235, 0.6)'
            }]
        },
        options:{responsive:true,plugins:{legend:{display:false}}}
    });
    // Historial
    let html="<ul>";
    history.forEach(h=>{
        html+=`<li>${h.date}: ${h.theme} â†’ ${h.result}</li>`;
    });
    html+="</ul>";
    document.getElementById("historyList").innerHTML=html;
}
